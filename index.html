<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio – Deich in 32×32 Pixelart</title>
  <style>
    :root {
      --scale: 6;           /* visueller Zoomfaktor (integer) */
      --vw: 160;            /* virtuelle Breite in Pixeln der Pixelwelt */
      --vh: 120;            /* virtuelle Höhe */
      --bg: #0b0e1a;
      --fg: #ffffff;
      --accent: #66ccff;
      --link: #ffd54a;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      display: grid;
      grid-template-rows: 1fr auto;
    }
    header {
      text-align: center;
      padding: 12px 8px 0;
      opacity: .85;
    }
    header h1 { margin: 0 0 4px; font-size: 18px; font-weight: 700; letter-spacing: .3px; }
    header p { margin: 0; font-size: 12px; color: #c0c6d0; }

    .stage-wrap {
      display: grid;
      place-items: center;
      padding: 8px 0 0;
    }
    canvas {
      width: calc(var(--vw) * 1px * var(--scale));
      height: calc(var(--vh) * 1px * var(--scale));
      image-rendering: pixelated;     /* super crisp */
      image-rendering: crisp-edges;
      border-radius: 12px;
      outline: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 12px 40px rgba(0,0,0,.45), 0 0 0 4px rgba(255,255,255,.02) inset;
      background: #87CEEB;
    }

    /* Fallback Links unterhalb für Accessibility & SEO */
    nav.quicklinks {
      display: grid; gap: 6px; grid-auto-flow: column; justify-content: center; padding: 10px 8px 16px;
    }
    nav.quicklinks a {
      color: var(--link); text-decoration: none; font-weight: 600; background: rgba(255,255,255,.06);
      padding: 6px 10px; border-radius: 10px; outline: 1px solid rgba(255,255,255,.08)
    }
    nav.quicklinks a:hover { background: rgba(255,255,255,.12); }

    main { max-width: 900px; margin: 0 auto; padding: 12px 16px 28px; }
    main section { margin: 28px 0; }
    main h2 { margin: 0 0 8px; font-size: 20px; }
    main p { margin: 0; color: #cbd3df; }

    footer { color:#9aa3b2; text-align:center; padding: 12px; font-size: 12px; }

    /* kleiner, wenn Viewport schmal ist */
    @media (max-width: 480px) {
      :root { --scale: 4; }
      header h1 { font-size: 16px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Deich-Portfolio – Pixelart</h1>
    <p>Klick auf die Schafe (Projekte / Kontakt / Über mich). Szene passt sich an die echte Uhrzeit an.</p>
  </header>

  <div class="stage-wrap">
    <canvas id="stage" width="160" height="120" aria-label="Pixelart-Deich mit Plakatwand, Möwe und Schafen"></canvas>
  </div>

  <nav class="quicklinks" aria-label="Schnellzugriff">
    <a href="#projekte">Projekte</a>
    <a href="#kontakt">Kontakt</a>
    <a href="#uebermich">Über mich</a>
  </nav>

  <main>
    <section id="projekte">
      <h2>Projekte</h2>
      <p>Hier erscheinen deine Projekte. Ersetze diesen Text durch deine Inhalte.</p>
    </section>
    <section id="kontakt">
      <h2>Kontakt</h2>
      <p>Deine Kontaktmöglichkeiten – E‑Mail, LinkedIn, GitHub, etc.</p>
    </section>
    <section id="uebermich">
      <h2>Über mich</h2>
      <p>Kurzprofil, Skills und Interessen.</p>
    </section>
  </main>

  <footer>
    © <span id="year"></span> – Dein Name. 32×32‑Anmutung, reine HTML/JS/CSS, keine Libraries.
  </footer>

<script>
(() => {
  const cvs = document.getElementById('stage');
  const ctx = cvs.getContext('2d');
  const W = cvs.width;  // 160
  const H = cvs.height; // 120
  const pixel = (x,y,c) => { ctx.fillStyle = c; ctx.fillRect(x|0, y|0, 1, 1); };
  const rect = (x,y,w,h,c) => { ctx.fillStyle = c; ctx.fillRect(x|0, y|0, w|0, h|0); };
  const line = (x1,y1,x2,y2,c) => { ctx.strokeStyle=c; ctx.beginPath(); ctx.moveTo(x1+.5,y1+.5); ctx.lineTo(x2+.5,y2+.5); ctx.stroke(); };

  const rnd = (a,b)=> Math.random()*(b-a)+a;

  // --- Scene config ------------------------------------------------------
  const scene = {
    day: true,
    timeFactor: 0,        // 0..1 for transitions day<->night
    stars: Array.from({length: 40}, () => ({ x: Math.random()*W|0, y: (Math.random()*40)|0, tw: Math.random()*Math.PI*2 })),
    gullAsleep: false
  };

  const links = [
    { id: 'projekte', label: 'Projekte', x: 32, y: 84, w: 26, h: 16 },
    { id: 'kontakt',  label: 'Kontakt',  x: 64, y: 86, w: 26, h: 16 },
    { id: 'uebermich',label: 'Über mich',x: 96, y: 84, w: 30, h: 16 },
  ];

  const sheep = [
    { kind: 'sleep',  label: 'Projekte', bx: 36,  by: 92, t: 0, flip:false },
    { kind: 'eat',    label: 'Kontakt',  bx: 68,  by: 94, t: 0, flip:true  },
    { kind: 'watch',  label: 'Über mich',bx: 101, by: 92, t: 0, flip:false },
  ];

  function getIsDay() {
    const now = new Date();
    const hr = now.getHours();
    // Tag zwischen 7–19 Uhr, sonst Nacht
    return hr >= 7 && hr < 19;
  }

  function updateTimeState(dt) {
    const targetDay = getIsDay();
    // smooth transition
    scene.day = targetDay;
    const target = targetDay ? 0 : 1; // 0 day sky, 1 night sky
    const speed = 0.15; // transition speed
    scene.timeFactor += (target - scene.timeFactor) * Math.min(1, dt * speed);
    scene.gullAsleep = scene.timeFactor > 0.7; // schläft wenn recht dunkel
  }

  // --- Drawing helpers ---------------------------------------------------
  function drawSky() {
    // Interpolate colors between day and night
    const t = scene.timeFactor; // 0..1
    const dayTop = [135, 206, 235];     // #87CEEB
    const dayBot = [186, 230, 253];     // #bae6fd
    const nightTop= [7, 10, 20];        // sehr dunkel
    const nightBot= [14, 18, 38];
    const lerp = (a,b)=> (a + (b-a)*t)|0;
    const top = `rgb(${lerp(dayTop[0],nightTop[0])},${lerp(dayTop[1],nightTop[1])},${lerp(dayTop[2],nightTop[2])})`;
    const bot = `rgb(${lerp(dayBot[0],nightBot[0])},${lerp(dayBot[1],nightBot[1])},${lerp(dayBot[2],nightBot[2])})`;

    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0, top);
    g.addColorStop(1, bot);
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // Sonne tagsüber
    if (scene.timeFactor < 0.5) {
      const sunX = 135, sunY = 20;
      ctx.fillStyle = 'rgba(255, 240, 160, 0.95)';
      ctx.beginPath(); ctx.arc(sunX, sunY, 6, 0, Math.PI*2); ctx.fill();
    }
    // Sterne nachts
    if (scene.timeFactor > 0.4) {
      ctx.globalAlpha = (scene.timeFactor - 0.4) * 1.6; // blend-in
      ctx.fillStyle = '#ffffff';
      for (const s of scene.stars) {
        if (((Math.sin(Date.now()*0.003 + s.tw)+1)*0.5) > 0.6) {
          ctx.fillRect(s.x, s.y, 1, 1);
        }
      }
      ctx.globalAlpha = 1;
    }
  }

  function drawSea() {
    // Nordsee im Hintergrund hinter dem Deich – nur schmaler Streifen
    const horizonY = 64;
    rect(0, horizonY, W, 10, `rgba(${20 + scene.timeFactor*20|0}, ${80 + scene.timeFactor*20|0}, ${150 + scene.timeFactor*20|0}, 1)`);
    // kleine helle Linien als Wellen
    ctx.globalAlpha = 0.4 - scene.timeFactor*0.2;
    ctx.strokeStyle = '#cfe9ff';
    for (let x=0; x<W; x+=6) {
      line(x, horizonY + ((x*13)%7), x+3, horizonY + ((x*13)%7), '#cfe9ff');
    }
    ctx.globalAlpha = 1;
  }

  function drawDike() {
    // Deich als hügelige grüne Fläche
    const baseY = 80;
    const t = Date.now()*0.0005;
    for (let y = baseY; y < H; y++) {
      const green = 120 - (y-baseY);
      ctx.fillStyle = `rgb(${40}, ${Math.max(80, green)}, ${40})`;
      ctx.fillRect(0, y, W, 1);
    }
    // leichte Hügelkante
    for (let x=0; x<W; x++) {
      const y = 78 + Math.sin(x*0.07 + t)*1.2;
      pixel(x, y, '#2f6b2f');
    }
  }

  function drawBillboard() {
    // Stützen
    rect(58, 58, 4, 26, '#4b4b4b');
    rect(98, 58, 4, 26, '#4b4b4b');
    // Tafel
    rect(48, 40, 64, 24, '#f2f2f2');
    rect(49, 41, 62, 22, '#ffffff');
    // Rahmen
    ctx.strokeStyle = '#777';
    ctx.strokeRect(48.5, 40.5, 63, 23);

    // Lichtfassungen (3 Leuchten oben)
    const lampXs = [58, 80, 102];
    for (const lx of lampXs) {
      rect(lx-1, 38, 4, 2, '#444');
      rect(lx, 36, 2, 2, '#666');
    }

    // Lichtkegel nachts
    if (scene.timeFactor > 0.55) {
      const alpha = (scene.timeFactor - 0.55) * 1.2;
      ctx.globalCompositeOperation = 'lighter';
      ctx.fillStyle = `rgba(255, 255, 200, ${0.35*alpha})`;
      for (const lx of lampXs) {
        ctx.beginPath();
        ctx.moveTo(lx+1, 38);
        ctx.lineTo(48, 40);
        ctx.lineTo(112, 40);
        ctx.closePath();
        ctx.fill();
      }
      ctx.globalCompositeOperation = 'source-over';
      // Schein auf Tafel
      rect(50, 42, 60, 20, `rgba(255,255,210,${0.12 + 0.25*alpha})`);
    }

    // Möwe oben rechts, Rücken zum Betrachter
    drawGull(104, 34);
  }

  function drawGull(x,y){
    // Körper
    rect(x, y, 8, 4, '#dcdcdc');
    rect(x+1, y+1, 6, 2, '#ffffff');
    // Kopf weggewandt (nach rechts)
    rect(x+7, y+1, 2, 2, '#dcdcdc');
    // Schnabel nach hinten nicht sichtbar -> kleiner Tupfer
    pixel(x+8, y+2, '#b5b5b5');
    // Flügel
    rect(x+2, y+2, 4, 1, '#b5b5b5');
    // Beine (wenn wach)
    if (!scene.gullAsleep) {
      pixel(x+2, y+4, '#d4a64a');
      pixel(x+5, y+4, '#d4a64a');
    }
    // Schlafblase bei Nacht
    if (scene.gullAsleep) {
      const zX = x+3 + Math.sin(Date.now()*0.004)*1;
      pixel(zX, y-2, '#ffffff');
    }
  }

  function drawSheepOne(s) {
    // s: {bx,by,t,kind}
    // Grundform
    const x = s.bx + (s.kind==='watch' ? Math.sin(Date.now()*0.003 + s.bx)*1.5 : 0);
    const y = s.by;
    // Körper
    rect(x, y, 12, 8, '#f4f4f4');
    rect(x+1, y+1, 10, 6, '#ffffff');
    // Kopf
    const faceY = y+2 + (s.kind==='eat' ? 2+Math.sin(Date.now()*0.004+s.bx)*1.5 : 0) + (s.kind==='sleep'?1:0);
    const faceX = x - (s.flip?2:2);
    rect(faceX, faceY, 4, 3, '#444');
    // Auge (nur wenn nicht schlafend nachts)
    const nightSleepAll = scene.timeFactor>0.6;
    if (!(nightSleepAll || s.kind==='sleep')) {
      pixel(faceX+1, faceY+1, '#ffffff');
    } else {
      // geschlossene Augen
      pixel(faceX+1, faceY+2, '#888');
    }
    // Beine (rudimentär, kleines Wackeln = Laufen)
    const step = Math.sin(Date.now()*0.008 + s.bx);
    if (s.kind==='watch' && !nightSleepAll) {
      pixel(x+3, y+8, step>0? '#333':'#444');
      pixel(x+7, y+8, step<0? '#333':'#444');
    } else {
      pixel(x+3, y+8, '#333');
      pixel(x+7, y+8, '#333');
    }

    // Text-Label auf dem Körper (Mini-Pixel-Schrift)
    drawTinyText(Math.round(x+1), Math.round(y+2), s.label);

    // Schlaf-Zeichen
    if (s.kind==='sleep' || nightSleepAll) {
      const z = Math.sin(Date.now()*0.006 + s.bx);
      pixel(x+10, y-2 + (z>0?0:1), '#ffffff');
    }
  }

  // Minimalistische Pixel-Schrift (5×5 Grid pro Buchstabe, groß genug für kurze Wörter)
  const font5 = {
    'A':[0b01110,0b10001,0b11111,0b10001,0b10001],
    'B':[0b11110,0b10001,0b11110,0b10001,0b11110],
    'C':[0b01111,0b10000,0b10000,0b10000,0b01111],
    'D':[0b11110,0b10001,0b10001,0b10001,0b11110],
    'E':[0b11111,0b10000,0b11110,0b10000,0b11111],
    'F':[0b11111,0b10000,0b11110,0b10000,0b10000],
    'G':[0b01111,0b10000,0b10111,0b10001,0b01110],
    'H':[0b10001,0b10001,0b11111,0b10001,0b10001],
    'I':[0b01110,0b00100,0b00100,0b00100,0b01110],
    'K':[0b10001,0b10010,0b11100,0b10010,0b10001],
    'L':[0b10000,0b10000,0b10000,0b10000,0b11111],
    'M':[0b10001,0b11011,0b10101,0b10001,0b10001],
    'N':[0b10001,0b11001,0b10101,0b10011,0b10001],
    'O':[0b01110,0b10001,0b10001,0b10001,0b01110],
    'P':[0b11110,0b10001,0b11110,0b10000,0b10000],
    'R':[0b11110,0b10001,0b11110,0b10010,0b10001],
    'S':[0b01111,0b10000,0b01110,0b00001,0b11110],
    'T':[0b11111,0b00100,0b00100,0b00100,0b00100],
    'U':[0b10001,0b10001,0b10001,0b10001,0b01110],
    'Ü':[0b00100,0b10001,0b10001,0b10001,0b01110],
    'V':[0b10001,0b10001,0b10001,0b01010,0b00100],
    'Ä':[0b01010,0b10001,0b11111,0b10001,0b10001],
    'Ö':[0b01010,0b10001,0b10001,0b10001,0b01110],
    ' ': [0,0,0,0,0],
    '-':[0,0b00000,0b01110,0b00000,0],
    'E':[0b11111,0b10000,0b11110,0b10000,0b11111]
  };

  function drawGlyph5(x,y, glyph, color='#222'){
    for (let r=0; r<5; r++){
      const row = glyph[r] || 0;
      for (let c=0; c<5; c++){
        if (row & (1 << (4-c))) pixel(x+c, y+r, color);
      }
    }
  }

  function drawTinyText(x,y, text){
    const up = text.toUpperCase();
    let cx=x; const color = '#222';
    for (const ch of up) {
      const g = font5[ch] || font5[' '];
      drawGlyph5(cx, y, g, color);
      cx += 6; // 5 + 1 spacing
    }
  }

  function drawForeground() {
    // leichte Grashalme vorn
    for (let i=0; i<80; i++){
      const gx = (i*17)%W; const gy = 96 + Math.sin((i*23)%6)*1;
      pixel(gx, gy, '#2b5e2b');
      if (Math.random()>.95) pixel(gx, gy-1, '#3b7e3b');
    }
  }

  // --- Interaction -------------------------------------------------------
  cvs.addEventListener('click', ev => {
    const rectEl = cvs.getBoundingClientRect();
    const scaleX = cvs.width / rectEl.width;
    const scaleY = cvs.height / rectEl.height;
    const x = (ev.clientX - rectEl.left) * scaleX;
    const y = (ev.clientY - rectEl.top) * scaleY;
    for (const L of links) {
      if (x>=L.x && x<=L.x+L.w && y>=L.y && y<=L.y+L.h) {
        document.getElementById(L.id)?.scrollIntoView({behavior:'smooth'});
        // kleiner Klick-Flash
        flashBox(L.x, L.y, L.w, L.h);
        break;
      }
    }
  });

  let flash = null;
  function flashBox(x,y,w,h){ flash = {x,y,w,h,t:200}; }

  function drawFlash(dt){
    if (!flash) return;
    flash.t -= dt;
    const a = Math.max(0, Math.min(1, flash.t/200));
    ctx.strokeStyle = `rgba(255,255,255,${a})`;
    ctx.strokeRect(flash.x+.5, flash.y+.5, flash.w-1, flash.h-1);
    if (flash.t<=0) flash=null;
  }

  // --- Main loop ---------------------------------------------------------
  let last = performance.now();
  function frame(now){
    const dt = (now - last); last = now;
    updateTimeState(dt/1000);

    ctx.clearRect(0,0,W,H);
    drawSky();
    drawSea();
    drawDike();
    drawBillboard();

    // Schafe: nachts schlafen alle
    const nightAll = scene.timeFactor > 0.6;
    for (let i=0; i<sheep.length; i++){
      const s = sheep[i];
      const original = s.kind;
      if (nightAll) s.kind='sleep';
      drawSheepOne(s);
      s.kind = original;
    }

    drawForeground();
    drawFlash(dt);
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);

  // Footer Jahr
  document.getElementById('year').textContent = new Date().getFullYear();
})();
</script>
</body>
</html>
