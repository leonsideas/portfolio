<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pixel-Sky – Tag/Nacht-Zyklus</title>
<style>
  html,body{margin:0;height:100%;background:#000;overflow:hidden}
  body{image-rendering:pixelated;font-family:monospace;}

  .sky,.sea,.grass{position:absolute;left:0;right:0;transition:background 1s linear;}
  .sky{top:0;height:65%;}
  .sea{bottom:20%;height:25%;}
  .grass{bottom:0;height:20%;}

  /* Sonne & Mond */
  .sun,.moon{
    position:absolute;width:40px;height:40px;border-radius:50%;
    top:10%;left:50%;transform:translateX(-50%);
    box-shadow:0 0 10px 2px rgba(255,255,255,.4);
    transition:opacity 1s ease;
  }
  .sun{background:#ffd86b;}
  .moon{background:#dbe5ff;box-shadow:0 0 15px 3px rgba(190,210,255,.5),inset -4px -4px 0 0 rgba(120,140,200,.3);}

  #stars{position:absolute;inset:0;opacity:0;transition:opacity 1s ease;pointer-events:none;}

  /* Pixel-Banding für Charme */
  .band{height:4px;opacity:.4;mix-blend-mode:overlay;}
</style>
</head>
<body>
  <div class="sky"></div>
  <canvas id="stars"></canvas>
  <div class="sea"></div>
  <div class="grass"></div>
  <div class="sun"></div>
  <div class="moon"></div>

<script>
  const sky = document.querySelector('.sky');
  const sea = document.querySelector('.sea');
  const grass = document.querySelector('.grass');
  const sun = document.querySelector('.sun');
  const moon = document.querySelector('.moon');
  const stars = document.getElementById('stars');
  const ctx = stars.getContext('2d');

  function resizeStars(){
    stars.width=window.innerWidth;
    stars.height=window.innerHeight*0.6;
    ctx.clearRect(0,0,stars.width,stars.height);
    for(let i=0;i<150;i++){
      const x=Math.random()*stars.width;
      const y=Math.random()*stars.height;
      const r=Math.random()*1.5;
      ctx.fillStyle=`rgba(255,255,255,${Math.random()})`;
      ctx.fillRect(x,y,r,r);
    }
  }
  window.addEventListener('resize',resizeStars);resizeStars();

  // Zeiten anpassen
  const DAWN_START=5.5,DAY_START=7,DUSK_START=18,NIGHT_START=20;

  function phase(){
    const h=new Date().getHours()+new Date().getMinutes()/60;
    if(h<DAWN_START) return 1; // Nacht
    if(h<DAY_START) return 1-(h-DAWN_START)/(DAY_START-DAWN_START); // Morgendämmerung
    if(h<DUSK_START) return 0; // Tag
    if(h<NIGHT_START) return (h-DUSK_START)/(NIGHT_START-DUSK_START); // Abenddämmerung
    return 1; // Nacht
  }

  function lerp(a,b,t){return a+(b-a)*t;}
  function mix(c1,c2,t){
    const a=parseInt(c1.slice(1),16),b=parseInt(c2.slice(1),16);
    const r=lerp((a>>16)&255,(b>>16)&255,t);
    const g=lerp((a>>8)&255,(b>>8)&255,t);
    const bl=lerp(a&255,b&255,t);
    return `rgb(${r|0},${g|0},${bl|0})`;
  }

  function updateScene(){
    const t=phase(); // 0 = Tag, 1 = Nacht
    const skyDayTop="#8ed0ff",skyNightTop="#0b1b2e";
    const seaDay="#3a87c2",seaNight="#0a2a46";
    const grassDay="#3b6a4a",grassNight="#0f2f1f";

    const skyColor=mix(skyDayTop,skyNightTop,t);
    const seaColor=mix(seaDay,seaNight,t);
    const grassColor=mix(grassDay,grassNight,t);
    sky.style.background=`linear-gradient(${skyColor},${mix("#5bb2ec","#143150",t)})`;
    sea.style.background=seaColor;
    grass.style.background=grassColor;

    // Sonne/Mond bewegen
    const now=new Date();
    const h=now.getHours()+now.getMinutes()/60;
    const w=window.innerWidth, hSky=window.innerHeight*0.6;
    let sunX, sunY, moonX, moonY;
    if(h>=7 && h<=19){
      const n=(h-7)/12;
      sunX=10+n*80; sunY=60-Math.sin(n*Math.PI)*40;
      sun.style.transform=`translate(${sunX}vw,${sunY}vh)`;
      sun.style.opacity=1; moon.style.opacity=0; stars.style.opacity=0;
    }else{
      const hh=h<7?h+24:h; const n=(hh-19)/12;
      moonX=90-n*80; moonY=60-Math.sin(n*Math.PI)*35;
      moon.style.transform=`translate(${moonX}vw,${moonY}vh)`;
      sun.style.opacity=0; moon.style.opacity=1; stars.style.opacity=1;
    }
  }

  updateScene();
  setInterval(updateScene,60*1000);
</script>
</body>
</html>
